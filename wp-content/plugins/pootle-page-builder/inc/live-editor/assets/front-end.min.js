var logPPBData,ppbIpad,ppbNotify,ppbPrevuDebug,ppbTemplateFromRow;Array.prototype.ppbPrevuMove=function(a,b){return this.splice(b,0,this.splice(a,1)[0]),this},ppbPrevuDebug=1,ppbIpad={},logPPBData=function(a,b,c){var d,e;"undefined"!=typeof ppbPrevuDebug&&ppbPrevuDebug&&(e={message:a,content:[],cells:[],rows:[]},d=jQuery,d.each(ppbData.widgets,function(a,b){b&&b.info?e.content.push("Content "+a+" in Grid: "+b.info.grid+" Cell: "+b.info.cell+" Text: '"+d(b.text).text().substring(0,16)+"'"):e.content.push("Content "+a+" undefined info")}),d.each(ppbData.grid_cells,function(a,b){e.cells.push("Cell "+a+" in Grid: "+b.grid+" with Weight: "+b.weight)}),d.each(ppbData.grids,function(a,b){b.style?e.rows.push("Row "+a+" original id"+b.id+" Contains: "+b.cells+" cells with BG: "+b.style.background+" "+b.style.background_image):e.rows.push("Row "+a+" original id"+b.id+" Contains: "+b.cells+" cells with Styles undefined")}),e.hasOwnProperty(c)?console.log(e[c]):console.log(e),b&&console.log(b))},jQuery(function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return a.each(ppbData.grids,function(a,b){ppbData.grids[a].id=a}),a.each(ppbData.grid_cells,function(a,b){ppbData.grid_cells[a].id=a}),a.fn.prevuBlockInit=function(){a(this).each(function(){var b;b=a(this),b.draggable(v.contentDraggable),b.resizable(v.contentResizable),b.droppable(v.moduleDroppable),b.removeClass("ppb-content-v-center ppb-content-h-center")})},a.fn.prevuRowInit=function(){var b;b=a(this),b.find(".ppb-block").prevuBlockInit(),b.find(".panel-grid-cell-container > .panel-grid-cell").resizable(v.resizableCells),tinymce.init(v.tmce),n.sortable("refresh")},d=a("#pootlepb-content-editor-panel"),p=a("#pootlepb-row-editor-panel"),l=p.add(d),e=a("#pootlepb-confirm-delete"),f=a("#pootlepb-deleting-item"),b=a("#pootlepb-add-row"),q=a("#pootlepb-set-title"),g=a("#pootlepb-design-templates"),h=a("#pootlepb-design-templates-preview-wrap"),m=a("#pootlepb-post-settings"),o=a("#ppb-ipad-color-picker"),i=a("#ppb-iconpicker"),n=a("#pootle-page-builder"),k=a("#pootlepb-modules-wrap"),c=a("body"),j=a("#ppb-loading"),t={dialogClass:"ppb-cool-panel",autoOpen:!1,draggable:!1,resizable:!1,title:"Edit content block",height:a(window).height()-50,width:a(window).width()-50,buttons:{Done:function(){}}},v={noRedirect:!1,debug:!0,unSavedChanges:!1,justClickedEditRow:!1,justClickedEditBlock:!1,syncAjax:function(){return jQuery.post(ppbAjax.url,ppbAjax,function(b){var d,e;return b.replace(RegExp(" ","g"),"")?(d=a(a.parseHTML(b,document,!0)),"function"==typeof v.ajaxCallback&&(e=v.ajaxCallback,delete v.ajaxCallback,e(d,ppbAjax,b),ppbCorrectOnResize()),a("style#pootle-live-editor-styles").html(d.find("style#pootle-live-editor-styles").html()),ppbAjax.publish&&(v.unSavedChanges=!1,v.noRedirect||(window.ppbAjaxDebug?c.append('<div class="ajax-debug">'+b+"</div>"):window.location=b)),ppbAjax.publish=0,void j.fadeOut(250)):void console.log("Error: No response from server at "+ppbAjax.url)})},sync:function(b,d){var e;if(logPPBData("Before sync"),v.ajaxCallback=b,v.unSavedChanges=!0,v.saveTmceBlock(a(".mce-edit-focus")),delete ppbAjax.data,ppbAjax.data=ppbData,j.fadeIn(250),d){if(ppbAjax.publish=d,c.trigger("savingPPB"),ppbAjax.title)return e=[{text:d,icons:{primary:"Publish"===d?"ipad-publish":""},click:function(){q.ppbDialog("close"),v.syncAjax()}}],e[d]=function(){},q.parent().attr("data-action",d),q.ppbDialog("open"),void q.ppbDialog("option","buttons",e)}else delete ppbAjax.publish;logPPBData("After sync"),v.syncAjax()},reset:function(b){var c,d;c={},d=[],b||v.resort(),a.each(ppbData.widgets,function(b,e){var f,g,h,i;if(e&&e.info){for(g=a('.ppb-edit-block[data-i_bkp="'+e.info.id+'"]'),f=g.closest(".ppb-block"),h="panel-"+ppbAjax.post+"-"+e.info.grid+"-"+e.info.cell+"-",i=0;i<25;){if(!c.hasOwnProperty(h+i)){c[h+i]=1,h+=i;break}i++}g.data("index",b).attr("data-index",b),f.attr("id",h),ppbData.widgets[b].info.id=b}else d.push(b)}),a.each(d,function(a,b){delete ppbData.widgets[b]}),a.each(ppbData.grids,function(b,d){var e,f,g,h,i;g=a('.ppb-edit-row[data-i_bkp="'+d.id+'"]'),e=g.closest(".ppb-row"),f=e.children(".panel-row-style").children("style"),i=new RegExp(e.attr("id"),"g"),h="pg-"+ppbAjax.post+"-"+b,g.data("index",b).attr("data-index",b),f.html(f.html().replace(i,h)),e.attr("id",h),c[h]=1,ppbData.grids[b].id=b}),a.each(ppbData.grid_cells,function(b,d){var e,f,g,h,i;for(f=void 0,d.hasOwnProperty("old_grid")?(f=d.old_grid,delete d.old_grid):f=d.grid,g="pgc-"+ppbAjax.post+"-",i=g+f+"-",e=void 0,g+=d.grid+"-",h=0;h<25;){if(!c.hasOwnProperty(g+h)){g+=h,c[g]=1;break}h++}i+=h,e=a("#"+i),e.data("newID",g),ppbData.grid_cells[b].id=b}),a(".ppb-live-edit-object").each(function(){var b,c;b=a(this),c=b.data("index"),b.data("i_bkp",c).attr("data-i_bkp",c)}),a(".ppb-col").each(function(){var b,c;b=a(this),c=b.data("newID"),a(this).attr("id",c),b.removeData("newID")})},resort:function(){ppbData.widgets.sort(function(a,b){var c,d,e,f,g,h;return a.info?b.info?(d=parseInt(a.info.grid),c=parseInt(a.info.cell),e=parseInt(a.info.id),g=parseInt(b.info.grid),f=parseInt(b.info.cell),h=parseInt(b.info.id),1e4*d+1e3*c+e-(1e4*g+1e3*f+h)):-1:1}),ppbData.grid_cells.sort(function(a,b){var c,d,e,f;return c=parseInt(a.grid),d=parseInt(a.id),e=parseInt(b.grid),f=parseInt(b.id),100*c+d-(100*e+f)}),v.unSavedChanges=!0},rowBgToggle:function(){var b;b=p.find("[data-style-field=background_toggle]"),a(".bg_section").hide(),a(b.val()).show()},editPanel:function(){var b,c;"undefined"!=typeof ppbData.widgets[window.ppbPanelI]&&(panels.addInputFieldEventHandlers(d),b=ppbData.widgets[window.ppbPanelI],c=JSON.parse(b.info.style),panels.setStylesToFields(d,c),tinyMCE.get("ppbeditor").setContent(b.text),a("html").trigger("pootlepb_admin_editor_panel_done",[d,c]))},savePanel:function(){var b,c;ppbData.widgets[window.ppbPanelI].text=tinyMCE.get("ppbeditor").getContent(),c=JSON.parse(ppbData.widgets[window.ppbPanelI].info.style),c=panels.getStylesFromFields(d,c),ppbData.widgets[window.ppbPanelI].info.style=JSON.stringify(c),b=a(".ppb-block.active"),v.sync(function(c,d){var e,f,g,h,i;h=b.attr("id"),e=c.find("#"+h),i=e.closest(".panel-grid-cell").children("style").html(),f=b.closest(".panel-grid-cell"),e.addClass("pootle-live-editor-new-content-block"),b.replaceWith(e),e=a(".pootle-live-editor-new-content-block"),a("html").trigger("pootlepb_le_content_updated",[e]),e.removeClass("pootle-live-editor-new-content-block").addClass("active").prevuBlockInit(),f.children("style").length?f.children("style").html(i):i&&(g=a("<style>").html(i),f.prepend(g)),tinymce.init(v.tmce)})},editRow:function(){var b,c,d;b=p.find("[data-style-field=background_toggle]"),v.rowBgToggle(),b.on("change",v.rowBgToggle),"undefined"!=typeof ppbData.grids[window.ppbRowI]&&(c=ppbData.grids[window.ppbRowI],d=c.style,p.find("[data-style-field]").each(function(){var b,c;b=a(this),c=b.attr("data-style-field"),"undefined"==typeof d[c]&&(d[c]=""),"checkbox"===b.attr("type")?(b.prop("checked",!1),d[c]&&b.prop("checked",!0)):"slider"===b.attr("data-style-field-type")?b.siblings(".ppb-slider").slider("value",d[c]):"color"===b.attr("data-style-field-type")?b.wpColorPicker("color",d[c]):b.val(d[c]),b.change()}))},saveRow:function(){var b,c;b=ppbData.grids[window.ppbRowI],c=ppbData.grids[window.ppbRowI].style,p.find("[data-style-field]").each(function(){var b,d;b=a(this),d=b.attr("data-style-field"),"checkbox"===b.attr("type")?(c[d]="",b.prop("checked")&&(c[d]=1)):c[d]=b.val()}),ppbData.grids[window.ppbRowI].style=c,v.sync(function(b,c){var d,e;e="#pg-"+c.post+"-"+window.ppbRowI,d=b.find(e),d.addClass("pootle-live-editor-new-row"),a(e).replaceWith(d),d=a(".pootle-live-editor-new-row"),a("html").trigger("pootlepb_le_content_updated",[d]),d.removeClass("pootle-live-editor-new-cell"),a(e).prevuRowInit()})},addRow:function(c,d,e,f){var g,h,i,j,k,l,m,n,o;for(window.ppbRowI=ppbData.grids.length,m=parseInt(a("#ppb-row-add-cols").val()),f=f?f:[],logPPBData("Adding row"),o={id:window.ppbRowI,cells:m,style:"object"==typeof e?e:{background:"",background_image:"",background_image_repeat:"",background_image_size:"cover",background_parallax:"",background_toggle:"",bg_color_wrap:"",bg_image_wrap:"",bg_mobile_image:"",bg_overlay_color:"",bg_overlay_opacity:"0.5",bg_video:"",bg_video_wrap:"",bg_wrap_close:"",class:"",col_class:"",col_gutter:"1",full_width:"",hide_row:"",margin_bottom:"0",margin_top:"0",row_height:"0",style:""}},ppbData.grids.push(o),h={grid:window.ppbRowI,weight:1/m},i="string"==typeof d?d:"<h2>Hi there,</h2><p>I am a new content block, go ahead, edit me and make me cool...</p>","object"!=typeof d&&(d=[]),g={text:i,info:{class:"Pootle_PB_Content_Block",grid:window.ppbRowI,style:'{"background-color":"","background-transparency":"","text-color":"","border-width":"","border-color":"","padding":"","rounded-corners":"","inline-css":"","class":"","wc_prods-add":"","wc_prods-attribute":"","wc_prods-filter":null,"wc_prods-ids":null,"wc_prods-category":null,"wc_prods-per_page":"","wc_prods-columns":"","wc_prods-orderby":"","wc_prods-order":""}'}},k=0,j=null;k<m;)l=ppbData.grid_cells.length,"number"!=typeof j&&(j=l),h.id=l,h.weight=1/m,f[k]&&(f[k].weight?h.weight=f[k].weight:"number"==typeof f[k]&&(h.weight=f[k])),k++,ppbData.grid_cells.push(a.extend(!0,{},h));for(n=d.length?d.length:m,k=0;k<n;)l=ppbData.widgets.length,g.info.cell=k,g.info.id=l,d[k]&&(g.text="string"==typeof d[k].text?d[k].text:i,g.info.style="string"==typeof d[k].style?d[k].style:"{}","undefined"!=typeof d[k].cell&&(g.info.cell=d[k].cell)),k++,ppbData.widgets.push(a.extend(!0,{},g));logPPBData("Row added"),b.ppbDialog("close"),v.sync(function(b,d,e){var f,g;g=b.find("#pg-"+d.post+"-"+window.ppbRowI),f=g.find(".panel-grid-cell-container > .panel-grid-cell"),a(".ppb-block.active, .ppb-row.active").removeClass("active"),g.find(".pootle-live-editor-realtime:eq(0)").parents(".ppb-block, .ppb-row").addClass("active"),a(".pootle-live-editor.add-row").before(g),g=a("#pg-"+d.post+"-"+window.ppbRowI),g.prevuRowInit(),"function"==typeof c&&c(g)})},syncRowPosition:function(b,c){var d,e,f;if(e=-1,d=a(".mce-edit-focus"),v.saveTmceBlock(d),d.removeClass("mce-edit-focus"),c!=b)return ppbData.grids.ppbPrevuMove(b,c),f=[b,c].sort(function(a,b){return a-b}),c<b&&(e=1),a.each(ppbData.widgets,function(a,d){var g;d&&d.info&&(g=parseInt(d.info.grid),f[0]<=g&&f[1]>=g&&(g==b?ppbData.widgets[a].info.grid=c:ppbData.widgets[a].info.grid=g+e))}),a.each(ppbData.grid_cells,function(a,d){var g;d&&(g=parseInt(d.grid),ppbData.grid_cells[a].old_grid=g,f[0]<=g&&f[1]>=g&&(g==b?ppbData.grid_cells[a].grid=c:ppbData.grid_cells[a].grid=g+e))}),v.resort(),v.sync(function(){v.reset("noSort")}),logPPBData("Moved row "+b+" => "+c)},rowsSortable:{items:"> .panel-grid",handle:".ppb-edit-row .drag-handle",start:function(b,c){a(this).data("draggingRowI",n.children(".ppb-row").index(c.item))},update:function(a,b){v.syncRowPosition(n.data("draggingRowI"),n.children(".ppb-row").index(b.item))}},resizableCells:{handles:"w",start:function(){v.resizableCells.correctCellData(a(this)),a(this).siblings(".panel-grid-cell").each(function(){v.resizableCells.correctCellData(a(this))})},stop:function(b,c){a(this).parent().removeClass("ppb-cols-resizing")},resize:function(b,c){var d,e,f,g,h,i,j;f=a(this),d=f.parent(),e=f.prev(),j=1,i=c.size.width,g=c.originalSize.width,h=d.innerWidth(),d.addClass("ppb-cols-resizing"),f.css("width",100*f.innerWidth()/h+"%"),e.siblings(".panel-grid-cell").each(function(){j+=a(this).outerWidth()}),j+=parseInt(e.css("padding-left"))+parseInt(e.css("padding-right")),e.css("width",100*(h-j-1)/h+"%"),v.resizableCells.correctCellData(f),v.resizableCells.correctCellData(e),v.unSavedChanges=!0,g<i?.93*d.width()<j&&f.resizable("widget").trigger("mouseup"):.07*d.width()>f.width()&&f.resizable("widget").trigger("mouseup")},correctCellData:function(b){var c,d,e,f;return f=b.outerWidth(),d=b.parent().width()+1,c=a(".panel-grid-cell-container > .panel-grid-cell").not(".ppb-block *").index(b),e=Math.floor(1e4*f/d)/1e4,b.find(".pootle-live-editor.resize-cells").html('<div class="weight">'+Math.round(1e3*e)/10+"%</div>"),ppbData.grid_cells[c].weight=e,e}},contentDraggable:{handle:".ppb-edit-block .drag-handle",grid:[5,5],start:function(b,c){var d,e,f;e=a(this),d=e.closest(".panel-row-style"),f=d.css("min-height"),f&&d.find(".panel-grid-cell-container, .ppb-col").not(".ppb-block *").css("min-height",f),e.find(".ppb-edit-block .dashicons-before:first").click(),c.position.left=parseInt(e.css("margin-left")),c.position.top=parseInt(e.css("margin-top"))},drag:function(b,c){var d,e,f,g,h,i,j,k;f=a(this),d=f.parent(),e=f.closest(".panel-row-style"),i={t:parseInt(f.css("margin-top")),l:parseInt(f.css("margin-left"))},j=c.position.top+i.t,h=c.position.left+i.l,g=(parseInt(e.css("min-height"))-f.outerHeight())/2,k=(d.width()-parseInt(f.outerWidth()))/2,(j<-25||h<-25)&&f.draggable("widget").trigger("mouseup"),e.removeClass("pootle-guides-x pootle-guides-y"),g>25&&Math.abs(g-j)<25&&(e.addClass("pootle-guides-x"),c.position.top=g-i.t),k>25&&Math.abs(k-h)<25&&(e.addClass("pootle-guides-y"),c.position.left=k-i.l)},stop:function(b,c){var d,e,f,g,h;h=JSON.parse(ppbData.widgets[window.ppbPanelI].info.style),g={},e=a(this),f={h:"ppb-content-h-center",v:"ppb-content-v-center"},d=e.closest(".panel-row-style"),h.class=h.class?h.class:"",d.hasClass("pootle-guides-y")?h.class+=0>h.class.indexOf(f.h)?" "+f.h:"":h.class=h.class.replace(new RegExp("[ ]?"+f.h,"gi"),""),d.hasClass("pootle-guides-x")?h.class+=0>h.class.indexOf(f.v)?" "+f.v:"":h.class=h.class.replace(new RegExp("[ ]?"+f.v,"gi"),""),d.removeClass("pootle-guides-x pootle-guides-y"),h["margin-top"]=Math.max(1,c.position.top+parseInt(e.css("margin-top"))),h["margin-left"]=Math.max(1,c.position.left+parseInt(e.css("margin-left"))),e.css({marginTop:h["margin-top"],top:"",marginLeft:h["margin-left"],left:"",width:"",height:""}),ppbData.widgets[window.ppbPanelI].info.style=JSON.stringify(h)}},contentResizable:{handles:{e:".ui-resizable-e",w:".ui-resizable-w"},start:function(b,c){var d;d=a(this),d.find(".ppb-edit-block .dashicons-before:first").click(),d.css({maxWidth:9999})},stop:function(b,c){var d,e,f;f=JSON.parse(ppbData.widgets[window.ppbPanelI].info.style),e=a(this),d=e.parent(),f.width=Math.round(parseInt(e.width())),f["margin-left"]=Math.max(1,c.position.left+parseInt(e.css("margin-left"))),e.css({maxWidth:f.width,marginLeft:f["margin-left"],left:"",width:""}),ppbData.widgets[window.ppbPanelI].info.style=JSON.stringify(f)},resize:function(b,c){var d,e,f;f=JSON.parse(ppbData.widgets[window.ppbPanelI].info.style),e=a(this),d=e.parent(),e.outerWidth()-7>d.width()&&(e.css("width",""),e.resizable("widget").trigger("mouseup"))}},moduleDraggable:{helper:"clone",start:function(){k.removeClass("toggle")}},insertModule:function(b,c){var d,e,f;f=c.data("tab"),b.find(".dashicons-move").click(),d=b.find(".mce-content-body"),e=tinymce.get(d.attr("id")),e&&(e.selection.select(tinyMCE.activeEditor.getBody(),!0),e.selection.collapse(!1)),c.data("callback")&&"function"==typeof window.ppbModules[c.data("callback")]&&window.ppbModules[c.data("callback")](b,e,d),f&&(0<f.indexOf("-row-tab")?a(".panel-grid.active").find(".ppb-edit-row .settings-dialog").click():b.find(".ppb-edit-block .settings-dialog").click(),a('a.ppb-tabs-anchors[href="'+f+'"]').click())},moduleDroppable:{accept:".ppb-module-existing-row",activeClass:"ppb-drop-module",hoverClass:"ppb-hover-module",drop:function(b,c){var d,e;d=c.draggable,e=a(this),e.hasClass("add-row")?d.data("row-callback")&&"function"==typeof window.ppbModules[d.data("row-callback")]?window.ppbModules[d.data("row-callback")]():(a("#ppb-row-add-cols").val("1"),v.addRow(function(a){setTimeout(function(){v.insertModule(a.find(".ppb-block").last(),d)},106)},"<p>&nbsp;</p>")):v.insertModule(e,d)}},insertImage:function(){return v.insertImageFrame?void v.insertImageFrame.open():(v.insertImageFrame=wp.media({library:{type:"image"},displaySettings:!0,displayUserSettings:!1,title:"Choose Image",button:{text:"Insert in Content Block"},multiple:!1}),v.insertImageFrame.on("attach",function(){a('.setting[data-setting="url"]').before('<label class="setting" data-setting="url"><span class="name">Size</span><input type="text" value="" readonly=""></label>')}),v.insertImageFrame.on("select",function(){var a,b,c;c=v.insertImageFrame.state().get("selection").first().toJSON(),a='<figure id="attachment_'+c.id+'" class="'+(c.caption?"wp-caption":"")+'"><img class="size-medium wp-image-'+c.id+'" src="'+c.url+'" alt="'+c.alt+'">'+(c.caption?'<figcaption class="wp-caption-text">'+c.caption+"</figcaption>":"")+"</figure>",b=tinymce.get(v.activeEditor.attr("id")),b.selection.select(tinyMCE.activeEditor.getBody(),!0),b.selection.collapse(!1),b.execCommand("mceInsertContent",!1,a)}),void v.insertImageFrame.open())},saveTmceBlock:function(a){var b;a&&a.length&&(b=a.siblings(".pootle-live-editor").data("index"),ppbData.widgets[b]&&(ppbData.widgets[b].text=a.html(),v.unSavedChanges=!0))},postSettings:function(){m.ppbDialog("open")},tmce:a.extend(!0,{},tinyMCEPreInit.mceInit.ppbeditor),sidePanelNav:function(){var b,c;return c=a(this),b=c.closest(".ppb-cool-panel"),c.hasClass("back")?b.removeClass("show-panel"):b.addClass("show-panel")},closeSidePanel:function(b){return function(d,e){if(c.css("margin-left",0),a(this).closest(".show-panel").removeClass("show-panel"),ppbCorrectOnResize(),"function"==typeof b)return b()}},openSidePanel:function(a){return function(){if(c.css("margin-left",300),ppbCorrectOnResize(),"function"==typeof a)return a()}},saveFieldsOnChange:function(){var b,c,d;if(c=a(this),b=c.closest(".ppb-dialog-buttons.show-panel"),b.length){if(d=b.data("saveTimeout"),"saving"===d)return;return d&&clearTimeout(d),b.data("saveTimeout",setTimeout(function(){return b.data("saveTimeout","saving"),b.find(".ppb-dialog-buttonset button").click(),b.data("saveTimeout","")},2500))}}},v.showdown=new showdown.Converter,t.open=v.openSidePanel(v.editPanel),t.buttons.Done=v.savePanel,t.close=v.closeSidePanel(),d.ppbTabs().ppbDialog(t),t.title="Edit row",t.open=v.openSidePanel(v.editRow),t.buttons.Done=v.saveRow,p.ppbTabs({activate:function(a,b){if(b.newPanel)return b.newPanel.find("#ppbeditor_ifr").css("height",b.newTab.innerHeight()-268)}}).ppbDialog(t),l.find("a").click(v.sidePanelNav),l.on("change","[data-style-field], [dialog-field], input, textarea",v.saveFieldsOnChange),setTimeout(function(){return tinyMCE.get("ppbeditor").on("change keyup paste",function(){return v.saveFieldsOnChange.apply(this.container)})},700),panels.addInputFieldEventHandlers(p),t.title="Add row",t.dialogClass=t.open=null,t.buttons.Done=function(){return v.addRow(b.callback),b.callback=null},t.height=ppbAjax.ipad?268:232,t.width=340,b.ppbDialog(t),t.title="Are you sure",t.buttons={Yes:function(){"function"==typeof v.deleteCallback&&v.deleteCallback(),delete v.deleteCallback,e.ppbDialog("close")},Cancel:function(){e.ppbDialog("close")}},t.height=ppbAjax.ipad?241:200,t.width=430,e.ppbDialog(t),t.buttons={Done:function(){q.ppbDialog("close"),v.syncAjax()}},t.height=ppbAjax.ipad?232:227,t.width=430,t.title=q.data("title"),t.close=function(){ppbAjax.title=a("#ppble-live-page-title").val()},q.ppbDialog(t),t.close=!1,t.buttons={Cancel:function(){return q.ppbDialog("close")}},t.height=window.innerHeight-50,t.open=function(b,c){return a(this).find(".templates-wrap").masonry()},t.width=window.innerWidth-50,t.title=g.data("title"),g.ppbDialog(t),delete t.open,t.height=610,t.width=520,t.title="Insert icon",t.buttons=[{text:"Remove icon",class:"ui-button-link",click:function(){"function"==typeof u.callback&&u.callback({html:"",attr:"",style:"",class:"",size:"",color:""}),i.ppbDialog("close")}},{text:"Insert",click:function(){var a,b,c,d,e,f,g;i.ppbDialog("close"),b=i.clas.val(),c=i.colr.val(),f=i.size.val(),e=i.link.val(),g="font-size:"+f+"px;color:"+c,a='style="'+g+'" class="fa '+b+'"',d="<i "+a+'><span style="display:none">'+b+"</span></i>","function"==typeof u.callback&&u.callback({html:d,attr:a,style:g,class:b,size:f,color:c,link:e})}}],t.close=function(){},i.ppbDialog(t),i.find("#ppb-icon-choose").iconpicker({placement:"inline"}),i.clas=a("#ppb-icon-choose"),i.colr=a("#ppb-icon-color"),i.size=a("#ppb-icon-size"),i.link=a("#ppb-icon-link"),i.prvu=a("#ppb-icon-preview"),v.iconPrevu=function(a){var b,c,d,e,f;c=i.clas.val(),d=i.colr.val(),e=i.size.val(),f="font-size:"+e+"px;color:"+d,b='style="'+f+'" class="fa '+c+'"',i.prvu.html("<i "+b+'><span style="display:none">'+c+"</span></i>")},i.clas.on("iconpickerUpdated",v.iconPrevu),i.colr.wpColorPicker({change:v.iconPrevu}),i.size.change(v.iconPrevu),u=function(a,b){i.ppbDialog("open"),u.callback=a,i.clas.add(i.find(".iconpicker-search")).val(""),i.prvu.html(""),b&&(b.class&&i.clas.val(b.class).change(),b.color&&i.colr.val(b.color).change(),b.size&&i.size.val(parseInt(b.size)).change(),b.link&&i.link.val(b.link).change())},m.length&&(t.height=700,t.height=ppbAjax.ipad?529:502,t.width=610,t.title="Post settings",t.close=function(){ppbAjax.category=m.find(".post-category").val(),ppbAjax.tags=m.find(".post-tags").val()},t.buttons.Done=function(){m.ppbDialog("close"),v.syncAjax()},m.ppbDialog(t)),n.delegate(".pootle-live-editor .dashicons-before","mousedown",function(){a(".pootle-live-editor-realtime.has-focus").blur()}),n.delegate(".ppb-edit-row .dashicons-before","click",function(){window.ppbRowI=a(this).closest(".pootle-live-editor").data("index")}),n.delegate(".ppb-edit-row .settings-dialog","click",function(){p.ppbDialog("open")}),n.delegate(".ppb-edit-row .dashicons-admin-page","click",function(){var b,c,d,e,f,g;v.reset(),b=a(this).closest(".pootle-live-editor"),g=b.data("i"),f=a.extend(!0,{},ppbData.grids[g]),e=g+1,d=[],c=[],window.ppbRowI=b.closest(".pootle-live-editor").data("index"),ppbData.grids.splice(g,0,f),a.each(ppbData.widgets,function(b,d){var f,h;d&&d.info&&(c.push(a.extend(!0,{},d)),f=parseInt(d.info.grid),f==g&&(h=a.extend(!0,{},d),h.info.grid=e,c.push(h)))}),ppbData.widgets=a.extend(!0,[],c.sort(function(a,b){return a.info.grid-b.info.grid})),a.each(ppbData.grid_cells,function(b,c){var f,h;c&&(d.push(a.extend(!0,{},c)),f=parseInt(c.grid),f==g&&(h=a.extend(!0,{},c),h.grid=e,d.push(h)))}),ppbData.grid_cells=a.extend(!0,[],d.sort(function(a,b){return a.grid-b.grid})),v.sync(function(a,c){var d,e;e=a.find("#pg-"+c.post+"-"+window.ppbRowI),d=e.find(".panel-grid-cell-container > .panel-grid-cell"),d.css("width",101/d.length-1+"%"),e.prevuRowInit(),b.closest(".panel-grid").after(e)}),v.reset(),logPPBData()}),n.delegate(".ppb-edit-row .dashicons-no","click",function(){var b,c,d,g;d=[],c=[],b=a(this),g=parseInt(b.closest(".pootle-live-editor").data("index")),v.deleteCallback=function(){v.saveTmceBlock(a(".mce-edit-focus").removeClass("mce-edit-focus")),ppbData.grids.splice(g,1),a.each(ppbData.widgets,function(a,b){b&&b.info&&(g===parseInt(b.info.grid)?c.push(a):g<b.info.grid&&ppbData.widgets[a].info.grid--)}),a.each(ppbData.grid_cells,function(a,b){var c;b&&(c=parseInt(b.grid),g===c?d.push(a):g<c&&(ppbData.grid_cells[a].old_grid=c,ppbData.grid_cells[a].grid=--c))}),c.sort(function(a,b){return b-a}),d.sort(function(a,b){return b-a}),a.each(c,function(a,b){ppbData.widgets.splice(b,1)}),a.each(d,function(a,b){ppbData.grid_cells.splice(b,1)}),ppbData.grids.filter(function(){return!0}),ppbData.widgets.filter(function(){return!0}),ppbData.grid_cells.filter(function(){return!0}),b.closest(".panel-grid").remove(),v.sync(function(){v.reset()})},f.html("row"),e.ppbDialog("open")}),n.delegate(".ppb-edit-block .dashicons-before","click touchstart",function(){var b;b=a(this),a(".ppb-block.active, .ppb-row.active").removeClass("active"),b.parents(".ppb-block, .ppb-row").addClass("active"),window.ppbPanelI=b.closest(".pootle-live-editor").data("index"),v.activeEditor=a(this).closest(".ppb-block").children(".pootle-live-editor-realtime")}),n.delegate(".ppb-edit-block .settings-dialog","click",function(){d.ppbDialog("open")}),n.delegate(".ppb-edit-block .dashicons-no","click",function(){var b,c;v.reset(),b=a(this),c=b.closest(".pootle-live-editor").data("index"),v.deleteCallback=function(){ppbData.widgets.splice(c,1),b.closest(".ppb-block").remove(),v.reset()},f.html("content block"),e.ppbDialog("open")}),n.delegate(".ppb-edit-block .pootle-live-editor-addons .pootle-live-editor-addon","click",function(){var b;b=a(this),d.ppbDialog("open"),d.find('a[href="#pootle-'+b.data("id")+'-tab"]').click()}),n.delegate(".ppb-edit-block .dashicons-format-image","click",function(a){a.preventDefault(),v.insertImage()}),n.delegate(".pootle-live-editor.add-row .dashicons-plus","click",function(){var c;if(b.ppbDialog("open"),c=a(".panel-grid:last-child"),c.length)return a("html, body").animate({scrollTop:c.height()+c.offset().top},1e3),!1}),c.on("click touchstart",function(b){var c,d;if(c=a(b.target),!c.closest(".ppb-block").length||c.closest(".ppb-edit-row .dashicons-before, .ppb-edit-block .dashicons-before").length)try{webkit.messageHandlers.heySwift.postMessage("hideTextFormatting"),webkit.messageHandlers.heySwift.postMessage("hideKeyboard")}catch(a){d=a}else try{webkit.messageHandlers.heySwift.postMessage("showTextFormatting")}catch(a){d=a}}),n.delegate(".ppb-edit-row .insert-row","click",function(){var c;return c=a(this).closest(".ppb-row"),b.callback=function(a){return n.data("draggingRowI",a.index()),a.insertBefore(c),n.sortable("refresh"),v.syncRowPosition(n.data("draggingRowI"),a.index())},n.find(".pootle-live-editor.add-row .dashicons-plus").click()}),n.delegate(".ppb-edit-row .dashicons-editor-code","click",function(){var b,c;if(v.justClickedEditRow){try{webkit.messageHandlers.heySwift.postMessage("hideKeyboard")}catch(a){c=a}b=a(this),window.ppbRowI=b.closest(".pootle-live-editor").data("index"),p.ppbDialog("open")}else v.justClickedEditRow=!0,setTimeout(function(){v.justClickedEditRow=!1},520)}),n.delegate(".ppb-edit-block .dashicons-move","click",function(){var b;v.justClickedEditBlock?(b=a(this),window.ppbPanelI=b.closest(".pootle-live-editor").data("index"),d.ppbDialog("open")):(v.justClickedEditBlock=!0,setTimeout(function(){v.justClickedEditBlock=!1},520))}),ppbIpad.updatedNotice=a("#ppb-ipad-updated-notice"),ppbIpad.notice=a("#ppb-ipad-notice"),ppbIpad.AddRow=function(){b.ppbDialog("open")},ppbIpad.StyleRow=function(){var b,c;return c=a(".panel-grid.active"),1!==c.length?void alert("Please select a row by touching any of it's content blocks to start editing."):(b=c.children(".pootle-live-editor"),window.ppbRowI=b.data("index"),void p.ppbDialog("open"))},ppbIpad.StyleContent=function(){var b,c;return b=a(".ppb-block.active"),1!==b.length?void alert("Please select a content block to start editing."):(c=b.children(".pootle-live-editor"),window.ppbPanelI=c.data("index"),void d.ppbDialog("open"))},ppbIpad.insertImage=function(){var b;return b=a(".ppb-block.active"),1!==b.length?void alert("Please select a content block to start editing."):(v.activeEditor=b.children(".pootle-live-editor-realtime"),tinymce.execCommand("mceFocus",!1,v.activeEditor.attr("id")),void v.insertImage())},ppbIpad.preview=function(){v.sync(null,"Publish")},ppbIpad.postSettings=function(){v.postSettings()},ppbIpad.AddRow=function(){b.ppbDialog("open")},ppbIpad.Update=function(){var b,c;if(v.ajaxCallback=function(a,b,c){window.location=c+"?ppb-ipad=preview"},v.unSavedChanges=!0,v.saveTmceBlock(a(".mce-edit-focus")),ppbAjax.data=ppbData,ppbAjax.publish="Publish",v.noRedirect=1,ppbAjax.title)return b=[{text:"Save Draft",click:function(){var a;q.ppbDialog("close");try{webkit.messageHandlers.heySwift.postMessage("updatedLoadingPreview")}catch(b){a=b,console.log("The native context does not exist yet")}ppbIpad.notice.show(0),ppbAjax.publish="Save Draft",v.syncAjax()}},{text:"Publish",icons:{primary:"ipad-publish"},click:function(){var a;q.ppbDialog("close");try{webkit.messageHandlers.heySwift.postMessage("updatedLoadingPreview")}catch(b){a=b,console.log("The native context does not exist yet")}ppbIpad.notice.show(0),ppbAjax.publish="Publish",v.syncAjax()}}],q.parent().data("action","Publish"),q.ppbDialog("option","buttons",b),void q.ppbDialog("open");try{webkit.messageHandlers.heySwift.postMessage("updatedLoadingPreview")}catch(a){c=a,console.log("The native context does not exist yet")}ppbIpad.notice.show(0),v.syncAjax()},o.delegate(".ppb-ipad-color-picker span","mousedown",function(a){return a.preventDefault(),!1}),o.delegate(".ppb-ipad-color-picker span","click",function(b){b.preventDefault(),tinymce.activeEditor.execCommand("ForeColor",!1,a(this).data("color")),o.hide()}),ppbIpad.format={H1:function(){tinymce.activeEditor.execCommand("mceToggleFormat",!1,"h1")},H2:function(){tinymce.activeEditor.execCommand("mceToggleFormat",!1,"h2")},H3:function(){tinymce.activeEditor.execCommand("mceToggleFormat",!1,"h3")},H4:function(){tinymce.activeEditor.execCommand("mceToggleFormat",!1,"h4")},Quote:function(){tinymce.activeEditor.execCommand("mceBlockQuote")},Color:function(){var b;b=Math.max(a(window).scrollTop(),a(".ppb-block.active").offset().top),o.show().css("top",b)},Link:function(){tinymce.activeEditor.execCommand("PPB_Link")},Bold:function(){tinymce.activeEditor.execCommand("Bold")},Italic:function(){tinymce.activeEditor.execCommand("Italic")},Left:function(){tinymce.activeEditor.execCommand("JustifyLeft")},Center:function(){tinymce.activeEditor.execCommand("JustifyCenter")},Right:function(){tinymce.activeEditor.execCommand("JustifyRight")}},n.delegate(".pootle-live-editor.add-content .dashicons-plus","click",function(){var b,c,d;b=a(this),d=b.closest(".panel-grid-cell").attr("id"),c=d.split("-"),b.closest(".panel-grid-cell").addClass("this-cell-is-waiting"),ppbData.widgets.push({text:"<h2>Hi there,</h2><p>I am a new content block, go ahead, edit me and make me cool...</p>",info:{class:"Pootle_PB_Content_Block",grid:c[2],cell:c[3],style:'{"background-color":"","background-transparency":"","text-color":"","border-width":"","border-color":"","padding":"","rounded-corners":"","inline-css":"","class":"","wc_prods-add":"","wc_prods-attribute":"","wc_prods-filter":null,"wc_prods-ids":null,"wc_prods-category":null,"wc_prods-per_page":"","wc_prods-columns":"","wc_prods-orderby":"","wc_prods-order":""}'}}),v.reset(),ppbAjax.customData=d,v.sync(function(b,c){var d;d=b.find("#"+ppbAjax.customData),d.addClass("pootle-live-editor-new-cell"),a(".this-cell-is-waiting").replaceWith(d),d=a(".pootle-live-editor-new-cell"),a("html").trigger("pootlepb_le_content_updated",[d]),d.removeClass("pootle-live-editor-new-cell"),ppbAjax.customData=void 0}),v.reset()}),v.tmce.selector=".pootle-live-editor-realtime:not(.mce-content-body)",v.tmce.verify_html=!1,v.tmce.inline=!0,v.tmce.theme="ppbprevu",v.tmce.fontsize_formats="20px 25px 30px 35px 40px 50px 70px 100px",ppbAjax.ipad?(v.tmce.plugins=v.tmce.plugins.replace("wpeditimage,","").replace("wplink,","ppblink,"),a("a").click(function(a){a.preventDefault()})):(v.tmce.toolbar=["h1","h2","h3","h4","shrameeFonts","fontsizeselect","blockquote","forecolor","ppblink","bold","italic","alignleft","aligncenter","alignright","ppbInsertImage"],m.find("select").chosen()),v.tmce.content_css=ppbAjax.site+"/wp-includes/css/dashicons.min.css?ver=5.0.0",v.tmce.setup=function(b){b.onDblClick.add(function(b,c){var d,e;e=a(c.target),e.hasClass("fa")&&(d=e.parent("a"),u(function(b){b.class?(e.attr({class:"fa "+b.class,style:b.style}),b.link?(d.length||(e.wrap("<a></a>"),d=e.parent("a")),d.attr("href",b.link)):e.parent("a").length&&e.unwrap()):e.closest("div.ppb-fa-icon").remove(),v.saveTmceBlock(a(e.closest(".mce-content-body")))},{class:e.attr("class").replace("fa ",""),color:e.css("color"),size:e.css("font-size"),link:d.attr("href")}))}),b.on("change",function(b){v.saveTmceBlock(a(b.target.targetElm))}),b.on("focus",function(b){var c;c=a(b.target.targetElm),a(".ppb-block.active, .ppb-row.active").removeClass("active"),c.parents(".ppb-block, .ppb-row").addClass("active")}),b.addButton("ppbInsertImage",{text:"",icon:"dashicons dashicons-format-image",onclick:function(){
ppbIpad.insertImage()}}),b.addButton("ppbAlign",function(){var b;return b=[{icon:"alignleft",tooltip:"Align left",value:"alignleft"},{icon:"aligncenter",tooltip:"Align center",value:"aligncenter"},{icon:"alignright",tooltip:"Align right",value:"alignright"}],{type:"listbox",text:"",icon:"alignleft",minWidth:70,onclick:function(){},onselect:function(a){var b,c;b=tinymce.activeEditor,c=this.value().replace("align",""),b.execCommand("Justify"+c[0].toUpperCase()+c.substring(1))},values:b,onPostRender:function(){var c,d;c=tinymce.activeEditor,d=this,c.on("nodeChange",function(e){var f,g;f=c.formatter,g=null,a.each(e.parents,function(c,e){a.each(b,function(a,b){if(f.matchNode(e,b.value))return d.value(b.value),d.settings.icon=b.icon,!1})})})}}}),b.addButton("shrameeFonts",function(){var b;return b=[{text:"Default",value:"inherit"},{text:"Georgia",value:"Georgia, serif"},{text:"Arial Black",value:'"Arial Black", Gadget, sans-serif'},{text:"Comic Sans MS",value:'"Comic Sans MS", cursive, sans-serif'},{text:"Impact",value:"Impact, Charcoal, sans-serif"},{text:"Courier New",value:'"Courier New", Courier, monospace'},{text:"Abril Fatface",value:"Abril Fatface"},{text:"Amatic SC",value:"Amatic SC"},{text:"Dancing Script",value:"Dancing Script"},{text:"Droid Serif",value:"Droid Serif"},{text:"Great Vibes",value:"Great Vibes"},{text:"Inconsolata",value:"Inconsolata"},{text:"Indie Flower",value:"Indie Flower"},{text:"Lato",value:"Lato"},{text:"Lobster",value:"Lobster"},{text:"Lora",value:"Lora"},{text:"Oswald",value:"Oswald"},{text:"Pacifico",value:"Pacifico"},{text:"Passion One",value:"Passion One"},{text:"Patua One",value:"Patua One"},{text:"Playfair Display",value:"Playfair Display"},{text:"Poiret One",value:"Poiret One"},{text:"Raleway",value:"Raleway"},{text:"Roboto",value:"Roboto"},{text:"Roboto Condensed",value:"Roboto Condensed"},{text:"Roboto Mono",value:"Roboto Mono"},{text:"Roboto Slab",value:"Roboto Slab"},{text:"Shadows Into Light",value:"Shadows Into Light"},{text:"Sigmar One",value:"Sigmar One"},{text:"Source Sans Pro",value:"Source Sans Pro"},{text:"Ubuntu Mono",value:"Ubuntu Mono"}],{type:"listbox",text:"Font",icon:!1,minWidth:70,classes:"shramee-fonts-control",onclick:function(){},onselect:function(a){var b,d;b=tinymce.activeEditor,d=this.value(),d||b.formatter.remove("shrameeFontFormat"),-1===d.indexOf(",")?(b.formatter.apply("shrameeFontFormat",{font:d,gfont:d.replace(" ","+")}),c.append('<link href="https://fonts.googleapis.com/css?family='+d.replace(" ","+")+'"  rel="stylesheet">')):b.formatter.apply("shrameeFontFormat",{font:d})},values:b,onPostRender:function(){var c,d;c=tinymce.activeEditor,d=this,c.on("nodeChange",function(c){var e;e=null,a(c.parents).each(function(){var c;if(c=a(this).css("font-family"),a.each(b,function(b,d){if(-1<c.indexOf(d.text))return e=d.value,a(".mce-shramee-fonts-control").find(".mce-txt").html(d.text),!1}),e)return!1}),e||(a(".mce-shramee-fonts-control").find(".mce-txt").html("Font"),e="inherit"),d.state.set("value",e)})}}}),b.addButton("ppbFontStyles",function(){var b,c;return b=[{text:"Elegant shadow",value:"ppbfost-elegant-shadow"},{text:"Deep shadow",value:"ppbfost-deep-shadow"},{text:"Inset shadow",value:"ppbfost-inset-shadow"},{text:"Retro shadow",value:"ppbfost-retro-shadow"}],c="",{type:"listbox",text:"Font Style",icon:!1,minWidth:70,classes:"ppbFoStField",onselect:function(c){var d,e;d=tinymce.activeEditor,e=this.value(),a.each(b,function(a,b){d.formatter.remove("ppbFoStFormat",{value:b.value})}),d.formatter.apply("ppbFoStFormat",{value:e})},values:b,onPostRender:function(){var d,e;d=tinymce.activeEditor,e=this,d.on("nodeChange",function(d){var f;f=null,a(d.parents).each(function(){var c;if(c=a(this),a.each(b,function(b,d){if(c.hasClass(d.value))return f=d.value,a(".mce-ppbFoStField").find(".mce-txt").html(d.text),!1}),f)return!1}),f||(a(".mce-ppbFoStField").find(".mce-txt").html("Font Style"),f="inherit"),c=f,e.state.set("value",f)})}}})},v.tmce.formats={shrameeFontFormat:{inline:"span",classes:"ppb-google-font",attributes:{"data-font":"%gfont"},styles:{fontFamily:"%font"}},ppbFoStFormat:{block:"h2",classes:"%value"}},tinymce.init(v.tmce),n.sortable(v.rowsSortable),n.find(".panel-grid").each(function(){a(this).prevuRowInit()}),a('[href="#ppb-live-update-changes"]').click(function(){v.sync(null,"Save Draft")}),a('[href="#ppb-live-post-settings"]').click(function(){m.ppbDialog("option","buttons",{Done:function(){m.ppbDialog("close"),v.sync("Publish")}}).ppbDialog("open")}),a('[href="#ppb-live-publish-changes"]').click(function(){v.sync(null,"Publish")}),a(".ppb-edit-block").click(function(){var b;b=a(this).siblings(".mce-content-body").attr("id"),tinymce.get(b)&&tinymce.get(b).focus()}),a("#ppble-feat-img-prevu").click(function(){var b;return event.preventDefault(),"undefined"!=typeof b?void b.open():(b=wp.media.frames.ppbFeaturedImageFrame=wp.media({title:"Featured Image",button:{text:"Set Featured Image"},multiple:!1}),b.on("select",function(){var c;c=b.state().get("selection").first().toJSON(),ppbAjax.thumbnail=c.id,a("#ppble-feat-img-prevu").css("background-image","url("+c.sizes.thumbnail.url+")")}),void b.open())}),window.onbeforeunload=function(a){if(v.unSavedChanges)return"You have unsaved changes! Click 'Update' in admin bar to save.\n\nYour changes will be lost if you dan't save."},v.resort(),v.reset("noSort"),k.find(".ppb-module").draggable(v.moduleDraggable),v.newRowModuleDroppable=jQuery.extend(!0,{},v.moduleDroppable),v.newRowModuleDroppable.accept=".ppb-module-new-row",n.find(".ppb-block, .ppb-live-add-object.add-row").droppable(v.newRowModuleDroppable),window.ppbModules.image=function(a,b){v.insertImage()},window.ppbModules.chooseIconDialog=function(b,c,d){u(function(b){var e;c.selection.setCursorLocation(c.getBody().firstChild,0),c.selection.collapse(!1),e="div",b.link&&(b.html='<a href="'+b.link+'">'+b.html+"</a>"),a("#ppb-icon-inline").prop("checked")&&(e="span"),d.prepend("<"+e+' class="ppb-fa-icon" style="text-align: center;">&nbsp;&nbsp;'+b.html+"&nbsp;&nbsp;</div>"),v.saveTmceBlock(d)})},window.ppbModules.unsplash=function(a,b){ShrameeUnsplashImage(function(a){var c;c='<img src="'+a+'">',b.selection.select(tinyMCE.activeEditor.getBody(),!0),b.selection.collapse(!1),b.execCommand("mceInsertContent",!1,c)})},window.ppbModules.button=function(a,b){b.execCommand("pbtn_add_btn_cmd")},window.ppbModules.heroSection=function(a){var b;return b=a.closest(".panel-grid").find(".ppb-edit-row"),b.find(".ui-sortable-handle").click(),ppbData.grids[ppbRowI].style.full_width=!0,ppbData.grids[ppbRowI].style.background_toggle=".bg_image",ppbData.grids[ppbRowI].style.row_height="500"},window.ppbModules.onePager=function(b){return b.find(".ppb-edit-block .settings-dialog").click(),a('a.ppb-tabs-anchors[href="#pootle-ppb-1-pager-tab"]').click(),ppbModules.heroSection(b)},r=a("#ppb-tooltip"),c.on("mouseenter","a.pbtn,.ppb-fa-icon",function(a){return r.show().html("Double click to edit").css({top:a.clientY,left:a.clientX})}),c.on("mouseleave","a.pbtn,.ppb-fa-icon",function(a){return r.hide()}),c.on("savingPPB",function(){return ppbAjax.data.google_fonts=[],c.find("[data-font]").not('[data-font="%gfont"]').each(function(){return ppbAjax.data.google_fonts.push(a(this).attr("data-font"))})}),window.ppbModules.designTemplateRow=function(a,b){return g.ppbDialog("open")},s=function(b){var c,d,e,f,i,j;return d=a(b.target),d.hasClass("fa-search")?(h.find("img").attr("src",d.siblings("img").attr("src")),h.fadeIn()):(c=d.closest(".ppb-tpl"),f=c.data("id"),c.hasClass("pro-inactive")?void ppbNotify("Template "+f+' needs <a href="https://www.pootlepress.com/pootle-pagebuilder-pro/" target="_blank">Pootle Pagebuilder Pro</a> active.'):(j=ppbDesignTpls[f],i=j.style?JSON.parse(j.style):{},i=i.style?i.style:i,e=1,j.cell?e=j.cell.length:j.content&&(e=j.content.length),a("#ppb-row-add-cols").val(e),v.addRow(function(a){return setTimeout(function(){},106)},j.content,i,j.cell),g.ppbDialog("close")))},g.on("click",".ppb-tpl",s),a("html").on("pootlepb_le_content_updated",function(a,b){return ppbSkrollr.refresh(b.find(".ppb-col"))})}),ppbTemplateFromRow=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;if(!ppbData||!ppbData.grids||!ppbData.grids[a])return{};for(a=parseInt(a),m=ppbData.grids[a].style,b||(b=m.background_image||m.grad_image||m.bg_mobile_image),n={img:b,content:[],cell:[],style:JSON.stringify(m)},j=function(a){return n.content.push({cell:a.info.cell,style:a.info.style,text:a.text})},i=function(a){return n.cell.push(parseFloat(a.weight))},k=ppbData.widgets,e=0,g=k.length;e<g;e++)c=k[e],c&&c.info&&parseInt(c.info.grid)===a&&j(c);for(l=ppbData.grid_cells,f=0,h=l.length;f<h;f++)d=l[f],d&&parseInt(d.grid)===a&&i(d);return JSON.stringify(n)},ppbNotify=function(a){var b;return b=jQuery("#ppb-notify"),b.html(a),b.fadeIn(),setTimeout(function(){return b.fadeOut()},2e3)};
//# sourceMappingURL=front-end.min.js.map